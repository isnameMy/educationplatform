<!-- src/templates/teacher/review.html -->
{% extends "base.html" %}
{% block content %}

<div class="row">
  <div class="col-lg-7">
    <div class="card card-hover">
      <div class="card-header bg-success text-white">
        <h4 class="mb-0">üìù –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã</h4>
        <small>–°—Ç—É–¥–µ–Ω—Ç: <strong>{{ submission.user.name }}</strong> ‚Ä¢ –ó–∞–¥–∞–Ω–∏–µ: {{ submission.assignment.title }}</small>
      </div>
      <div class="card-body">
        {% if submission.file_path.endswith('.pdf') %}
          <a href="/{{ submission.file_path }}" target="_blank" class="btn btn-primary mb-3">
            <i class="bi bi-file-earmark-pdf me-2"></i> –û—Ç–∫—Ä—ã—Ç—å PDF
          </a>
        {% elif submission.file_path.endswith('.ipynb') %}
          <a href="/{{ submission.file_path }}" target="_blank" class="btn btn-warning mb-3">
            <i class="bi bi-journal-code me-2"></i> –û—Ç–∫—Ä—ã—Ç—å .ipynb
          </a>
        {% else %}
          <a href="/{{ submission.file_path }}" class="btn btn-outline-secondary mb-3">
            <i class="bi bi-download me-2"></i> –°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª
          </a>
        {% endif %}

        <div class="alert alert-info">
          <i class="bi bi-lightbulb me-2"></i>
          <strong>–°–æ–≤–µ—Ç:</strong> –û—Å—Ç–∞–≤—å—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å ‚Äî —ç—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç —Å—Ç—É–¥–µ–Ω—Ç—É —Ä–∞—Å—Ç–∏.
        </div>
      </div>
    </div>
  </div>
  
  <div class="col-lg-5">
    <div class="card card-hover">
      <div class="card-header">
        <h5>–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</h5>
      </div>
      <div class="card-body">
        <form 
          hx-post="/teacher/review/{{ submission.id }}"
          hx-target="#review-result"
          hx-swap="innerHTML"
        >
          <div class="mb-3">
            <label class="form-label">–û—Ü–µ–Ω–∫–∞ <small class="text-muted">(0‚Äì10)</small></label>
            <input 
              type="number" 
              name="grade" 
              class="form-control form-control-lg" 
              min="0" 
              max="10" 
              value="8" 
              required
            >
          </div>
          
          <div class="mb-3">
            <label class="form-label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</label>
            <textarea 
              name="feedback" 
              class="form-control" 
              rows="4" 
              placeholder="–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ —Ö–æ—Ä–æ—à–æ? –ß—Ç–æ —É–ª—É—á—à–∏—Ç—å? –ü—Ä–∏–º–µ—Ä—ã..."
            >{{ "–•–æ—Ä–æ—à–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–≥—Ä–µ—Å—Å–∏–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é." if not submission.feedback else submission.feedback }}</textarea>
          </div>
          
          <button type="submit" class="btn btn-success w-100 btn-grad text-white py-2">
            <i class="bi bi-check-lg me-2"></i> –ü—Ä–∏–Ω—è—Ç—å —Ä–∞–±–æ—Ç—É
          </button>
        </form>
        
        <div id="review-result" class="mt-3"></div>
      </div>
    </div>
  </div>
</div>

{% endblock %}